/*!
 * ONNX Runtime Web v1.17.1
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Licensed under the MIT License.
 */
var Je=Object.defineProperty;var qr=Object.getOwnPropertyDescriptor;var Vr=Object.getOwnPropertyNames;var Xr=Object.prototype.hasOwnProperty;var P=(t,e)=>()=>(t&&(e=t(t=0)),e);var Jr=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Ce=(t,e)=>{for(var r in e)Je(t,r,{get:e[r],enumerable:!0})},Kr=(t,e,r,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of Vr(e))!Xr.call(t,o)&&o!==r&&Je(t,o,{get:()=>e[o],enumerable:!(i=qr(e,o))||i.enumerable});return t};var Ke=t=>Kr(Je({},"__esModule",{value:!0}),t);var De,ae,ve,Ue,Le=P(()=>{"use strict";De=new Map,ae=[],ve=(t,e,r)=>{if(e&&typeof e.init=="function"&&typeof e.createInferenceSessionHandler=="function"){let i=De.get(t);if(i===void 0)De.set(t,{backend:e,priority:r});else{if(i.priority>r)return;if(i.priority===r&&i.backend!==e)throw new Error(`cannot register backend "${t}" using priority ${r}`)}if(r>=0){let o=ae.indexOf(t);o!==-1&&ae.splice(o,1);for(let f=0;f<ae.length;f++)if(De.get(ae[f]).priority<=r){ae.splice(f,0,t);return}ae.push(t)}return}throw new TypeError("not a valid backend")},Ue=async t=>{let e=t.length===0?ae:t,r=[];for(let i of e){let o=De.get(i);if(o){if(o.initialized)return o.backend;if(o.aborted)continue;let f=!!o.initPromise;try{return f||(o.initPromise=o.backend.init(i)),await o.initPromise,o.initialized=!0,o.backend}catch(u){f||r.push({name:i,err:u}),o.aborted=!0}finally{delete o.initPromise}}}throw new Error(`no available backend found. ERR: ${r.map(i=>`[${i.name}] ${i.err}`).join(", ")}`)}});var _t=P(()=>{"use strict";Le()});var Ct,Dt=P(()=>{"use strict";Ct="1.17.1"});var Ut,ue,Ze=P(()=>{"use strict";Dt();Ut="warning",ue={wasm:{},webgl:{},webgpu:{},versions:{common:Ct},set logLevel(t){if(t!==void 0){if(typeof t!="string"||["verbose","info","warning","error","fatal"].indexOf(t)===-1)throw new Error(`Unsupported logging level: ${t}`);Ut=t}},get logLevel(){return Ut}};Object.defineProperty(ue,"logLevel",{enumerable:!0})});var U,Lt=P(()=>{"use strict";Ze();U=ue});var Rt,Mt,Ft=P(()=>{"use strict";Rt=(t,e)=>{let r=typeof document<"u"?document.createElement("canvas"):new OffscreenCanvas(1,1);r.width=t.dims[3],r.height=t.dims[2];let i=r.getContext("2d");if(i!=null){let o,f;e?.tensorLayout!==void 0&&e.tensorLayout==="NHWC"?(o=t.dims[2],f=t.dims[3]):(o=t.dims[3],f=t.dims[2]);let u=e?.format!==void 0?e.format:"RGB",c=e?.norm,m,l;c===void 0||c.mean===void 0?m=[255,255,255,255]:typeof c.mean=="number"?m=[c.mean,c.mean,c.mean,c.mean]:(m=[c.mean[0],c.mean[1],c.mean[2],0],c.mean[3]!==void 0&&(m[3]=c.mean[3])),c===void 0||c.bias===void 0?l=[0,0,0,0]:typeof c.bias=="number"?l=[c.bias,c.bias,c.bias,c.bias]:(l=[c.bias[0],c.bias[1],c.bias[2],0],c.bias[3]!==void 0&&(l[3]=c.bias[3]));let y=f*o,w=0,h=y,g=y*2,O=-1;u==="RGBA"?(w=0,h=y,g=y*2,O=y*3):u==="RGB"?(w=0,h=y,g=y*2):u==="RBG"&&(w=0,g=y,h=y*2);for(let S=0;S<f;S++)for(let _=0;_<o;_++){let A=(t.data[w++]-l[0])*m[0],x=(t.data[h++]-l[1])*m[1],k=(t.data[g++]-l[2])*m[2],H=O===-1?255:(t.data[O++]-l[3])*m[3];i.fillStyle="rgba("+A+","+x+","+k+","+H+")",i.fillRect(_,S,1,1)}if("toDataURL"in r)return r.toDataURL();throw new Error("toDataURL is not supported")}else throw new Error("Can not access image data")},Mt=(t,e)=>{let r=typeof document<"u"?document.createElement("canvas").getContext("2d"):new OffscreenCanvas(1,1).getContext("2d"),i;if(r!=null){let o,f,u;e?.tensorLayout!==void 0&&e.tensorLayout==="NHWC"?(o=t.dims[2],f=t.dims[1],u=t.dims[3]):(o=t.dims[3],f=t.dims[2],u=t.dims[1]);let c=e!==void 0&&e.format!==void 0?e.format:"RGB",m=e?.norm,l,y;m===void 0||m.mean===void 0?l=[255,255,255,255]:typeof m.mean=="number"?l=[m.mean,m.mean,m.mean,m.mean]:(l=[m.mean[0],m.mean[1],m.mean[2],255],m.mean[3]!==void 0&&(l[3]=m.mean[3])),m===void 0||m.bias===void 0?y=[0,0,0,0]:typeof m.bias=="number"?y=[m.bias,m.bias,m.bias,m.bias]:(y=[m.bias[0],m.bias[1],m.bias[2],0],m.bias[3]!==void 0&&(y[3]=m.bias[3]));let w=f*o;if(e!==void 0&&(e.format!==void 0&&u===4&&e.format!=="RGBA"||u===3&&e.format!=="RGB"&&e.format!=="BGR"))throw new Error("Tensor format doesn't match input tensor dims");let h=4,g=0,O=1,S=2,_=3,A=0,x=w,k=w*2,H=-1;c==="RGBA"?(A=0,x=w,k=w*2,H=w*3):c==="RGB"?(A=0,x=w,k=w*2):c==="RBG"&&(A=0,k=w,x=w*2),i=r.createImageData(o,f);for(let N=0;N<f*o;g+=h,O+=h,S+=h,_+=h,N++)i.data[g]=(t.data[A++]-y[0])*l[0],i.data[O]=(t.data[x++]-y[1])*l[1],i.data[S]=(t.data[k++]-y[2])*l[2],i.data[_]=H===-1?255:(t.data[H++]-y[3])*l[3]}else throw new Error("Can not access image data");return i}});var Qe,kt,Nt,Wt,Ht,zt=P(()=>{"use strict";Re();Qe=(t,e)=>{if(t===void 0)throw new Error("Image buffer must be defined");if(e.height===void 0||e.width===void 0)throw new Error("Image height and width must be defined");if(e.tensorLayout==="NHWC")throw new Error("NHWC Tensor layout is not supported yet");let{height:r,width:i}=e,o=e.norm??{mean:255,bias:0},f,u;typeof o.mean=="number"?f=[o.mean,o.mean,o.mean,o.mean]:f=[o.mean[0],o.mean[1],o.mean[2],o.mean[3]??255],typeof o.bias=="number"?u=[o.bias,o.bias,o.bias,o.bias]:u=[o.bias[0],o.bias[1],o.bias[2],o.bias[3]??0];let c=e.format!==void 0?e.format:"RGBA",m=e.tensorFormat!==void 0&&e.tensorFormat!==void 0?e.tensorFormat:"RGB",l=r*i,y=m==="RGBA"?new Float32Array(l*4):new Float32Array(l*3),w=4,h=0,g=1,O=2,S=3,_=0,A=l,x=l*2,k=-1;c==="RGB"&&(w=3,h=0,g=1,O=2,S=-1),m==="RGBA"?k=l*3:m==="RBG"?(_=0,x=l,A=l*2):m==="BGR"&&(x=0,A=l,_=l*2);for(let N=0;N<l;N++,h+=w,O+=w,g+=w,S+=w)y[_++]=(t[h]+u[0])/f[0],y[A++]=(t[g]+u[1])/f[1],y[x++]=(t[O]+u[2])/f[2],k!==-1&&S!==-1&&(y[k++]=(t[S]+u[3])/f[3]);return m==="RGBA"?new Y("float32",y,[1,4,r,i]):new Y("float32",y,[1,3,r,i])},kt=async(t,e)=>{let r=typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement,i=typeof ImageData<"u"&&t instanceof ImageData,o=typeof ImageBitmap<"u"&&t instanceof ImageBitmap,f=typeof t=="string",u,c=e??{},m=()=>{if(typeof document<"u")return document.createElement("canvas");if(typeof OffscreenCanvas<"u")return new OffscreenCanvas(1,1);throw new Error("Canvas is not supported")},l=y=>y instanceof HTMLCanvasElement||y instanceof OffscreenCanvas?y.getContext("2d"):null;if(r){let y=m();y.width=t.width,y.height=t.height;let w=l(y);if(w!=null){let h=t.height,g=t.width;if(e!==void 0&&e.resizedHeight!==void 0&&e.resizedWidth!==void 0&&(h=e.resizedHeight,g=e.resizedWidth),e!==void 0){if(c=e,e.tensorFormat!==void 0)throw new Error("Image input config format must be RGBA for HTMLImageElement");c.tensorFormat="RGBA",c.height=h,c.width=g}else c.tensorFormat="RGBA",c.height=h,c.width=g;w.drawImage(t,0,0),u=w.getImageData(0,0,g,h).data}else throw new Error("Can not access image data")}else if(i){let y,w;if(e!==void 0&&e.resizedWidth!==void 0&&e.resizedHeight!==void 0?(y=e.resizedHeight,w=e.resizedWidth):(y=t.height,w=t.width),e!==void 0&&(c=e),c.format="RGBA",c.height=y,c.width=w,e!==void 0){let h=m();h.width=w,h.height=y;let g=l(h);if(g!=null)g.putImageData(t,0,0),u=g.getImageData(0,0,w,y).data;else throw new Error("Can not access image data")}else u=t.data}else if(o){if(e===void 0)throw new Error("Please provide image config with format for Imagebitmap");let y=m();y.width=t.width,y.height=t.height;let w=l(y);if(w!=null){let h=t.height,g=t.width;return w.drawImage(t,0,0,g,h),u=w.getImageData(0,0,g,h).data,c.height=h,c.width=g,Qe(u,c)}else throw new Error("Can not access image data")}else{if(f)return new Promise((y,w)=>{let h=m(),g=l(h);if(!t||!g)return w();let O=new Image;O.crossOrigin="Anonymous",O.src=t,O.onload=()=>{h.width=O.width,h.height=O.height,g.drawImage(O,0,0,h.width,h.height);let S=g.getImageData(0,0,h.width,h.height);c.height=h.height,c.width=h.width,y(Qe(S.data,c))}});throw new Error("Input data provided is not supported - aborted tensor creation")}if(u!==void 0)return Qe(u,c);throw new Error("Input data provided is not supported - aborted tensor creation")},Nt=(t,e)=>{let{width:r,height:i,download:o,dispose:f}=e,u=[1,i,r,4];return new Y({location:"texture",type:"float32",texture:t,dims:u,download:o,dispose:f})},Wt=(t,e)=>{let{dataType:r,dims:i,download:o,dispose:f}=e;return new Y({location:"gpu-buffer",type:r??"float32",gpuBuffer:t,dims:i,download:o,dispose:f})},Ht=(t,e,r)=>new Y({location:"cpu-pinned",type:t,data:e,dims:r??[e.length]})});var Se,Me,$t,jt,Gt=P(()=>{"use strict";Se=new Map([["float32",Float32Array],["uint8",Uint8Array],["int8",Int8Array],["uint16",Uint16Array],["float16",Uint16Array],["int16",Int16Array],["int32",Int32Array],["bool",Uint8Array],["float64",Float64Array],["uint32",Uint32Array]]),Me=new Map([[Float32Array,"float32"],[Uint8Array,"uint8"],[Int8Array,"int8"],[Uint16Array,"uint16"],[Int16Array,"int16"],[Int32Array,"int32"],[Float64Array,"float64"],[Uint32Array,"uint32"]]),$t=!1,jt=()=>{if(!$t){$t=!0;let t=typeof BigInt64Array<"u"&&typeof BigInt64Array.from=="function",e=typeof BigUint64Array<"u"&&typeof BigUint64Array.from=="function";t&&(Se.set("int64",BigInt64Array),Me.set(BigInt64Array,"int64")),e&&(Se.set("uint64",BigUint64Array),Me.set(BigUint64Array,"uint64"))}}});var Yt,qt,Vt=P(()=>{"use strict";Re();Yt=t=>{let e=1;for(let r=0;r<t.length;r++){let i=t[r];if(typeof i!="number"||!Number.isSafeInteger(i))throw new TypeError(`dims[${r}] must be an integer, got: ${i}`);if(i<0)throw new RangeError(`dims[${r}] must be a non-negative integer, got: ${i}`);e*=i}return e},qt=(t,e)=>{switch(t.location){case"cpu":return new Y(t.type,t.data,e);case"cpu-pinned":return new Y({location:"cpu-pinned",data:t.data,type:t.type,dims:e});case"texture":return new Y({location:"texture",texture:t.texture,type:t.type,dims:e});case"gpu-buffer":return new Y({location:"gpu-buffer",gpuBuffer:t.gpuBuffer,type:t.type,dims:e});default:throw new Error(`tensorReshape: tensor location ${t.location} is not supported`)}}});var Y,Re=P(()=>{"use strict";Ft();zt();Gt();Vt();Y=class{constructor(e,r,i){jt();let o,f;if(typeof e=="object"&&"location"in e)switch(this.dataLocation=e.location,o=e.type,f=e.dims,e.location){case"cpu-pinned":{let c=Se.get(o);if(!c)throw new TypeError(`unsupported type "${o}" to create tensor from pinned buffer`);if(!(e.data instanceof c))throw new TypeError(`buffer should be of type ${c.name}`);this.cpuData=e.data;break}case"texture":{if(o!=="float32")throw new TypeError(`unsupported type "${o}" to create tensor from texture`);this.gpuTextureData=e.texture,this.downloader=e.download,this.disposer=e.dispose;break}case"gpu-buffer":{if(o!=="float32"&&o!=="float16"&&o!=="int32"&&o!=="int64"&&o!=="uint32"&&o!=="bool")throw new TypeError(`unsupported type "${o}" to create tensor from gpu buffer`);this.gpuBufferData=e.gpuBuffer,this.downloader=e.download,this.disposer=e.dispose;break}default:throw new Error(`Tensor constructor: unsupported location '${this.dataLocation}'`)}else{let c,m;if(typeof e=="string")if(o=e,m=i,e==="string"){if(!Array.isArray(r))throw new TypeError("A string tensor's data must be a string array.");c=r}else{let l=Se.get(e);if(l===void 0)throw new TypeError(`Unsupported tensor type: ${e}.`);if(Array.isArray(r)){if(e==="float16")throw new TypeError("Creating a float16 tensor from number array is not supported. Please use Uint16Array as data.");e==="uint64"||e==="int64"?c=l.from(r,BigInt):c=l.from(r)}else if(r instanceof l)c=r;else throw new TypeError(`A ${o} tensor's data must be type of ${l}`)}else if(m=r,Array.isArray(e)){if(e.length===0)throw new TypeError("Tensor type cannot be inferred from an empty array.");let l=typeof e[0];if(l==="string")o="string",c=e;else if(l==="boolean")o="bool",c=Uint8Array.from(e);else throw new TypeError(`Invalid element type of data array: ${l}.`)}else{let l=Me.get(e.constructor);if(l===void 0)throw new TypeError(`Unsupported type for tensor data: ${e.constructor}.`);o=l,c=e}if(m===void 0)m=[c.length];else if(!Array.isArray(m))throw new TypeError("A tensor's dims must be a number array");f=m,this.cpuData=c,this.dataLocation="cpu"}let u=Yt(f);if(this.cpuData&&u!==this.cpuData.length)throw new Error(`Tensor's size(${u}) does not match data length(${this.cpuData.length}).`);this.type=o,this.dims=f,this.size=u}static async fromImage(e,r){return kt(e,r)}static fromTexture(e,r){return Nt(e,r)}static fromGpuBuffer(e,r){return Wt(e,r)}static fromPinnedBuffer(e,r,i){return Ht(e,r,i)}toDataURL(e){return Rt(this,e)}toImageData(e){return Mt(this,e)}get data(){if(this.ensureValid(),!this.cpuData)throw new Error("The data is not on CPU. Use `getData()` to download GPU data to CPU, or use `texture` or `gpuBuffer` property to access the GPU data directly.");return this.cpuData}get location(){return this.dataLocation}get texture(){if(this.ensureValid(),!this.gpuTextureData)throw new Error("The data is not stored as a WebGL texture.");return this.gpuTextureData}get gpuBuffer(){if(this.ensureValid(),!this.gpuBufferData)throw new Error("The data is not stored as a WebGPU buffer.");return this.gpuBufferData}async getData(e){switch(this.ensureValid(),this.dataLocation){case"cpu":case"cpu-pinned":return this.data;case"texture":case"gpu-buffer":{if(!this.downloader)throw new Error("The current tensor is not created with a specified data downloader.");if(this.isDownloading)throw new Error("The current tensor is being downloaded.");try{this.isDownloading=!0;let r=await this.downloader();return this.downloader=void 0,this.dataLocation="cpu",this.cpuData=r,e&&this.disposer&&(this.disposer(),this.disposer=void 0),r}finally{this.isDownloading=!1}}default:throw new Error(`cannot get data from location: ${this.dataLocation}`)}}dispose(){if(this.isDownloading)throw new Error("The current tensor is being downloaded.");this.disposer&&(this.disposer(),this.disposer=void 0),this.cpuData=void 0,this.gpuTextureData=void 0,this.gpuBufferData=void 0,this.downloader=void 0,this.isDownloading=void 0,this.dataLocation="none"}ensureValid(){if(this.dataLocation==="none")throw new Error("The tensor is disposed.")}reshape(e){if(this.ensureValid(),this.downloader||this.disposer)throw new Error("Cannot reshape a tensor that owns GPU resource.");return qt(this,e)}}});var $,Fe=P(()=>{"use strict";Re();$=Y});var Xt,Jt,fe,ce,et=P(()=>{"use strict";Ze();Xt=(t,e)=>{ue.wasm.trace&&console.timeStamp(`${t}::ORT::${e}`)},Jt=(t,e)=>{let r=new Error().stack?.split(/\r\n|\r|\n/g)||[],i=!1;for(let o=0;o<r.length;o++){if(i&&!r[o].includes("TRACE_FUNC")){let f=`FUNC_${t}::${r[o].trim().split(" ")[1]}`;e&&(f+=`::${e}`),Xt("CPU",f);return}r[o].includes("TRACE_FUNC")&&(i=!0)}},fe=t=>{ue.wasm.trace&&Jt("BEGIN",t)},ce=t=>{ue.wasm.trace&&Jt("END",t)}});var ke,Kt=P(()=>{"use strict";Le();Fe();et();ke=class t{constructor(e){this.handler=e}async run(e,r,i){fe();let o={},f={};if(typeof e!="object"||e===null||e instanceof $||Array.isArray(e))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let u=!0;if(typeof r=="object"){if(r===null)throw new TypeError("Unexpected argument[1]: cannot be null.");if(r instanceof $)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(r)){if(r.length===0)throw new TypeError("'fetches' cannot be an empty array.");u=!1;for(let l of r){if(typeof l!="string")throw new TypeError("'fetches' must be a string array or an object.");if(this.outputNames.indexOf(l)===-1)throw new RangeError(`'fetches' contains invalid output name: ${l}.`);o[l]=null}if(typeof i=="object"&&i!==null)f=i;else if(typeof i<"u")throw new TypeError("'options' must be an object.")}else{let l=!1,y=Object.getOwnPropertyNames(r);for(let w of this.outputNames)if(y.indexOf(w)!==-1){let h=r[w];(h===null||h instanceof $)&&(l=!0,u=!1,o[w]=h)}if(l){if(typeof i=="object"&&i!==null)f=i;else if(typeof i<"u")throw new TypeError("'options' must be an object.")}else f=r}}else if(typeof r<"u")throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(let l of this.inputNames)if(typeof e[l]>"u")throw new Error(`input '${l}' is missing in 'feeds'.`);if(u)for(let l of this.outputNames)o[l]=null;let c=await this.handler.run(e,o,f),m={};for(let l in c)if(Object.hasOwnProperty.call(c,l)){let y=c[l];y instanceof $?m[l]=y:m[l]=new $(y.type,y.data,y.dims)}return ce(),m}async release(){return this.handler.dispose()}static async create(e,r,i,o){fe();let f,u={};if(typeof e=="string"){if(f=e,typeof r=="object"&&r!==null)u=r;else if(typeof r<"u")throw new TypeError("'options' must be an object.")}else if(e instanceof Uint8Array){if(f=e,typeof r=="object"&&r!==null)u=r;else if(typeof r<"u")throw new TypeError("'options' must be an object.")}else if(e instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&e instanceof SharedArrayBuffer){let w=e,h=0,g=e.byteLength;if(typeof r=="object"&&r!==null)u=r;else if(typeof r=="number"){if(h=r,!Number.isSafeInteger(h))throw new RangeError("'byteOffset' must be an integer.");if(h<0||h>=w.byteLength)throw new RangeError(`'byteOffset' is out of range [0, ${w.byteLength}).`);if(g=e.byteLength-h,typeof i=="number"){if(g=i,!Number.isSafeInteger(g))throw new RangeError("'byteLength' must be an integer.");if(g<=0||h+g>w.byteLength)throw new RangeError(`'byteLength' is out of range (0, ${w.byteLength-h}].`);if(typeof o=="object"&&o!==null)u=o;else if(typeof o<"u")throw new TypeError("'options' must be an object.")}else if(typeof i<"u")throw new TypeError("'byteLength' must be a number.")}else if(typeof r<"u")throw new TypeError("'options' must be an object.");f=new Uint8Array(w,h,g)}else throw new TypeError("Unexpected argument[0]: must be 'path' or 'buffer'.");let m=(u.executionProviders||[]).map(w=>typeof w=="string"?w:w.name),y=await(await Ue(m)).createInferenceSessionHandler(f,u);return ce(),new t(y)}startProfiling(){this.handler.startProfiling()}endProfiling(){this.handler.endProfiling()}get inputNames(){return this.handler.inputNames}get outputNames(){return this.handler.outputNames}}});var Zr,Zt=P(()=>{"use strict";Kt();Zr=ke});var Qt=P(()=>{"use strict"});var Qr,Ne,er=P(()=>{"use strict";Le();Fe();Qr="Training backend could not be resolved. Make sure you're using the correct configuration & WebAssembly files.",Ne=class t{constructor(e,r,i){this.handler=e,this.hasOptimizerModel=r,this.hasEvalModel=i}get trainingInputNames(){return this.handler.inputNames}get trainingOutputNames(){return this.handler.outputNames}get evalInputNames(){if(this.hasEvalModel)return this.handler.evalInputNames;throw new Error("This training session has no evalModel loaded.")}get evalOutputNames(){if(this.hasEvalModel)return this.handler.evalOutputNames;throw new Error("This training session has no evalModel loaded.")}static async create(e,r){let i=e.evalModel||"",o=e.optimizerModel||"",f=r||{},c=(f.executionProviders||[]).map(l=>typeof l=="string"?l:l.name),m=await Ue(c);if(m.createTrainingSessionHandler){let l=await m.createTrainingSessionHandler(e.checkpointState,e.trainModel,i,o,f);return new t(l,!!e.optimizerModel,!!e.evalModel)}else throw new Error(Qr)}typeNarrowingForRunStep(e,r,i,o,f){let u={},c={};if(typeof i!="object"||i===null||i instanceof $||Array.isArray(i))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let m=!0;if(typeof o=="object"){if(o===null)throw new TypeError("Unexpected argument[1]: cannot be null.");if(o instanceof $)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(o)){if(o.length===0)throw new TypeError("'fetches' cannot be an empty array.");m=!1;for(let l of o){if(typeof l!="string")throw new TypeError("'fetches' must be a string array or an object.");if(r.indexOf(l)===-1)throw new RangeError(`'fetches' contains invalid output name: ${l}.`);u[l]=null}if(typeof f=="object"&&f!==null)c=f;else if(typeof f<"u")throw new TypeError("'options' must be an object.")}else{let l=!1,y=Object.getOwnPropertyNames(o);for(let w of r)if(y.indexOf(w)!==-1){let h=o[w];(h===null||h instanceof $)&&(l=!0,m=!1,u[w]=h)}if(l){if(typeof f=="object"&&f!==null)c=f;else if(typeof f<"u")throw new TypeError("'options' must be an object.")}else c=o}}else if(typeof o<"u")throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(let l of e)if(typeof i[l]>"u")throw new Error(`input '${l}' is missing in 'feeds'.`);if(m)for(let l of r)u[l]=null;return[u,c]}convertHandlerReturnTypeToMapOfTensors(e){let r={};for(let i in e)if(Object.hasOwnProperty.call(e,i)){let o=e[i];o instanceof $?r[i]=o:r[i]=new $(o.type,o.data,o.dims)}return r}async lazyResetGrad(){await this.handler.lazyResetGrad()}async runTrainStep(e,r,i){let[o,f]=this.typeNarrowingForRunStep(this.trainingInputNames,this.trainingOutputNames,e,r,i),u=await this.handler.runTrainStep(e,o,f);return this.convertHandlerReturnTypeToMapOfTensors(u)}async runOptimizerStep(e){if(this.hasOptimizerModel)await this.handler.runOptimizerStep(e||{});else throw new Error("This TrainingSession has no OptimizerModel loaded.")}async runEvalStep(e,r,i){if(this.hasEvalModel){let[o,f]=this.typeNarrowingForRunStep(this.evalInputNames,this.evalOutputNames,e,r,i),u=await this.handler.runEvalStep(e,o,f);return this.convertHandlerReturnTypeToMapOfTensors(u)}else throw new Error("This TrainingSession has no EvalModel loaded.")}async getParametersSize(e=!0){return this.handler.getParametersSize(e)}async loadParametersBuffer(e,r=!0){let i=await this.getParametersSize(r);if(e.length!==4*i)throw new Error("Size of the buffer passed into loadParametersBuffer must match the number of parameters in the model. Please use getParametersSize method to check.");return this.handler.loadParametersBuffer(e,r)}async getContiguousParameters(e=!0){return this.handler.getContiguousParameters(e)}async release(){return this.handler.dispose()}}});var en,tr=P(()=>{"use strict";er();en=Ne});var tt={};Ce(tt,{InferenceSession:()=>Zr,TRACE:()=>Xt,TRACE_FUNC_BEGIN:()=>fe,TRACE_FUNC_END:()=>ce,Tensor:()=>$,TrainingSession:()=>en,env:()=>U,registerBackend:()=>ve});var le=P(()=>{"use strict";_t();Lt();Zt();Fe();et();Qt();tr()});var or={};Ce(or,{createReadStream:()=>nr,readFile:()=>tn,readFileSync:()=>rn});var tn,rn,nr,sr=P(()=>{tn=void 0,rn=void 0,nr=void 0});var ir={};Ce(ir,{join:()=>nn});var nn,ar=P(()=>{nn=void 0});var cr=Jr((fr,rt)=>{"use strict";var ur=(()=>{var t=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(t=t||__filename),function(e={}){var r=e,i,o;r.ready=new Promise((n,s)=>{i=n,o=s});var f=Object.assign({},r),u="./this.program",c=typeof window=="object",m=typeof importScripts=="function",l=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",y="",w,h,g;if(l){var O=(sr(),Ke(or)),S=(ar(),Ke(ir));y=m?S.dirname(y)+"/":__dirname+"/",w=(n,s)=>(n=te(n)?new URL(n):S.normalize(n),O.readFileSync(n,s?void 0:"utf8")),g=n=>(n=w(n,!0),n.buffer||(n=new Uint8Array(n)),n),h=(n,s,a,p=!0)=>{n=te(n)?new URL(n):S.normalize(n),O.readFile(n,p?void 0:"utf8",(b,T)=>{b?a(b):s(p?T.buffer:T)})},!r.thisProgram&&1<process.argv.length&&(u=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),r.inspect=()=>"[Emscripten Module object]"}else(c||m)&&(m?y=self.location.href:typeof document<"u"&&document.currentScript&&(y=document.currentScript.src),t&&(y=t),y.indexOf("blob:")!==0?y=y.substr(0,y.replace(/[?#].*/,"").lastIndexOf("/")+1):y="",w=n=>{var s=new XMLHttpRequest;return s.open("GET",n,!1),s.send(null),s.responseText},m&&(g=n=>{var s=new XMLHttpRequest;return s.open("GET",n,!1),s.responseType="arraybuffer",s.send(null),new Uint8Array(s.response)}),h=(n,s,a)=>{var p=new XMLHttpRequest;p.open("GET",n,!0),p.responseType="arraybuffer",p.onload=()=>{p.status==200||p.status==0&&p.response?s(p.response):a()},p.onerror=a,p.send(null)});var _=console.log.bind(console),A=console.error.bind(console);Object.assign(r,f),f=null,typeof WebAssembly!="object"&&de("no native wasm support detected");var x,k=!1,H,N,E,F,X;function Be(){var n=x.buffer;r.HEAP8=H=new Int8Array(n),r.HEAP16=new Int16Array(n),r.HEAPU8=N=new Uint8Array(n),r.HEAPU16=new Uint16Array(n),r.HEAP32=E=new Int32Array(n),r.HEAPU32=F=new Uint32Array(n),r.HEAPF32=new Float32Array(n),r.HEAPF64=X=new Float64Array(n)}var we=[],ge=[],be=[],Z=0,B=null,Q=null;function de(n){throw n="Aborted("+n+")",A(n),k=!0,n=new WebAssembly.RuntimeError(n+". Build with -sASSERTIONS for more info."),o(n),n}var ee=n=>n.startsWith("data:application/octet-stream;base64,"),te=n=>n.startsWith("file://"),W;if(W="ort-wasm.wasm",!ee(W)){var J=W;W=r.locateFile?r.locateFile(J,y):y+J}function Ge(n){if(g)return g(n);throw"both async and sync fetching of the wasm failed"}function pe(n){if(c||m){if(typeof fetch=="function"&&!te(n))return fetch(n,{credentials:"same-origin"}).then(s=>{if(!s.ok)throw"failed to load wasm binary file at '"+n+"'";return s.arrayBuffer()}).catch(()=>Ge(n));if(h)return new Promise((s,a)=>{h(n,p=>s(new Uint8Array(p)),a)})}return Promise.resolve().then(()=>Ge(n))}function Ee(n,s,a){return pe(n).then(p=>WebAssembly.instantiate(p,s)).then(p=>p).then(a,p=>{A(`failed to asynchronously prepare wasm: ${p}`),de(p)})}function Pe(n,s){var a=W;return typeof WebAssembly.instantiateStreaming!="function"||ee(a)||te(a)||l||typeof fetch!="function"?Ee(a,n,s):fetch(a,{credentials:"same-origin"}).then(p=>WebAssembly.instantiateStreaming(p,n).then(s,function(b){return A(`wasm streaming compile failed: ${b}`),A("falling back to ArrayBuffer instantiation"),Ee(a,n,s)}))}var re,ne={919888:(n,s,a,p)=>{if(typeof r>"u"||!r.za)return 1;if(n=se(n>>>0),n.startsWith("./")&&(n=n.substring(2)),n=r.za.get(n),!n)return 2;if(s>>>=0,a>>>=0,s+a>n.byteLength)return 3;try{return N.set(n.subarray(s,s+a),p>>>0>>>0),0}catch{return 4}}};function oe(n){this.xa=n-24,this.Ha=function(s){F[this.xa+4>>>2>>>0]=s},this.Ga=function(s){F[this.xa+8>>>2>>>0]=s},this.Aa=function(s,a){this.Fa(),this.Ha(s),this.Ga(a)},this.Fa=function(){F[this.xa+16>>>2>>>0]=0}}var Te=0,j=0,z=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,me=(n,s,a)=>{s>>>=0;var p=s+a;for(a=s;n[a]&&!(a>=p);)++a;if(16<a-s&&n.buffer&&z)return z.decode(n.subarray(s,a));for(p="";s<a;){var b=n[s++];if(b&128){var T=n[s++]&63;if((b&224)==192)p+=String.fromCharCode((b&31)<<6|T);else{var I=n[s++]&63;b=(b&240)==224?(b&15)<<12|T<<6|I:(b&7)<<18|T<<12|I<<6|n[s++]&63,65536>b?p+=String.fromCharCode(b):(b-=65536,p+=String.fromCharCode(55296|b>>10,56320|b&1023))}}else p+=String.fromCharCode(b)}return p},se=(n,s)=>(n>>>=0)?me(N,n,s):"",Oe=n=>{for(var s=0,a=0;a<n.length;++a){var p=n.charCodeAt(a);127>=p?s++:2047>=p?s+=2:55296<=p&&57343>=p?(s+=4,++a):s+=3}return s},Ye=(n,s,a,p)=>{if(a>>>=0,!(0<p))return 0;var b=a;p=a+p-1;for(var T=0;T<n.length;++T){var I=n.charCodeAt(T);if(55296<=I&&57343>=I){var G=n.charCodeAt(++T);I=65536+((I&1023)<<10)|G&1023}if(127>=I){if(a>=p)break;s[a++>>>0]=I}else{if(2047>=I){if(a+1>=p)break;s[a++>>>0]=192|I>>6}else{if(65535>=I){if(a+2>=p)break;s[a++>>>0]=224|I>>12}else{if(a+3>=p)break;s[a++>>>0]=240|I>>18,s[a++>>>0]=128|I>>12&63}s[a++>>>0]=128|I>>6&63}s[a++>>>0]=128|I&63}}return s[a>>>0]=0,a-b},he=n=>n%4===0&&(n%100!==0||n%400===0),pt=[0,31,60,91,121,152,182,213,244,274,305,335],mt=[0,31,59,90,120,151,181,212,243,273,304,334],ht=n=>{var s=Oe(n)+1,a=Tt(s);return a&&Ye(n,N,a,s),a},qe=[],Ve={},yt=()=>{if(!Xe){var n={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:u||"./this.program"},s;for(s in Ve)Ve[s]===void 0?delete n[s]:n[s]=Ve[s];var a=[];for(s in n)a.push(`${s}=${n[s]}`);Xe=a}return Xe},Xe,$r=[null,[],[]],wt=[31,29,31,30,31,30,31,31,30,31,30,31],gt=[31,28,31,30,31,30,31,31,30,31,30,31];function jr(n){var s=Array(Oe(n)+1);return Ye(n,s,0,s.length),s}function bt(n,s,a,p){function b(d,C,D){for(d=typeof d=="number"?d.toString():d||"";d.length<C;)d=D[0]+d;return d}function T(d,C){return b(d,C,"0")}function I(d,C){function D(Pt){return 0>Pt?-1:0<Pt?1:0}var ie;return(ie=D(d.getFullYear()-C.getFullYear()))===0&&(ie=D(d.getMonth()-C.getMonth()))===0&&(ie=D(d.getDate()-C.getDate())),ie}function G(d){switch(d.getDay()){case 0:return new Date(d.getFullYear()-1,11,29);case 1:return d;case 2:return new Date(d.getFullYear(),0,3);case 3:return new Date(d.getFullYear(),0,2);case 4:return new Date(d.getFullYear(),0,1);case 5:return new Date(d.getFullYear()-1,11,31);case 6:return new Date(d.getFullYear()-1,11,30)}}function K(d){var C=d.ta;for(d=new Date(new Date(d.ua+1900,0,1).getTime());0<C;){var D=d.getMonth(),ie=(he(d.getFullYear())?wt:gt)[D];if(C>ie-d.getDate())C-=ie-d.getDate()+1,d.setDate(1),11>D?d.setMonth(D+1):(d.setMonth(0),d.setFullYear(d.getFullYear()+1));else{d.setDate(d.getDate()+C);break}}return D=new Date(d.getFullYear()+1,0,4),C=G(new Date(d.getFullYear(),0,4)),D=G(D),0>=I(C,d)?0>=I(D,d)?d.getFullYear()+1:d.getFullYear():d.getFullYear()-1}n>>>=0,s>>>=0,a>>>=0,p>>>=0;var q=F[p+40>>>2>>>0];p={Da:E[p>>>2>>>0],Ca:E[p+4>>>2>>>0],va:E[p+8>>>2>>>0],ya:E[p+12>>>2>>>0],wa:E[p+16>>>2>>>0],ua:E[p+20>>>2>>>0],oa:E[p+24>>>2>>>0],ta:E[p+28>>>2>>>0],Ia:E[p+32>>>2>>>0],Ba:E[p+36>>>2>>>0],Ea:q?se(q):""},a=se(a),q={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var V in q)a=a.replace(new RegExp(V,"g"),q[V]);var It="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),Bt="January February March April May June July August September October November December".split(" ");q={"%a":d=>It[d.oa].substring(0,3),"%A":d=>It[d.oa],"%b":d=>Bt[d.wa].substring(0,3),"%B":d=>Bt[d.wa],"%C":d=>T((d.ua+1900)/100|0,2),"%d":d=>T(d.ya,2),"%e":d=>b(d.ya,2," "),"%g":d=>K(d).toString().substring(2),"%G":d=>K(d),"%H":d=>T(d.va,2),"%I":d=>(d=d.va,d==0?d=12:12<d&&(d-=12),T(d,2)),"%j":d=>{for(var C=0,D=0;D<=d.wa-1;C+=(he(d.ua+1900)?wt:gt)[D++]);return T(d.ya+C,3)},"%m":d=>T(d.wa+1,2),"%M":d=>T(d.Ca,2),"%n":()=>`
`,"%p":d=>0<=d.va&&12>d.va?"AM":"PM","%S":d=>T(d.Da,2),"%t":()=>"	","%u":d=>d.oa||7,"%U":d=>T(Math.floor((d.ta+7-d.oa)/7),2),"%V":d=>{var C=Math.floor((d.ta+7-(d.oa+6)%7)/7);if(2>=(d.oa+371-d.ta-2)%7&&C++,C)C==53&&(D=(d.oa+371-d.ta)%7,D==4||D==3&&he(d.ua)||(C=1));else{C=52;var D=(d.oa+7-d.ta-1)%7;(D==4||D==5&&he(d.ua%400-1))&&C++}return T(C,2)},"%w":d=>d.oa,"%W":d=>T(Math.floor((d.ta+7-(d.oa+6)%7)/7),2),"%y":d=>(d.ua+1900).toString().substring(2),"%Y":d=>d.ua+1900,"%z":d=>{d=d.Ba;var C=0<=d;return d=Math.abs(d)/60,(C?"+":"-")+("0000"+(d/60*100+d%60)).slice(-4)},"%Z":d=>d.Ea,"%%":()=>"%"},a=a.replace(/%%/g,"\0\0");for(V in q)a.includes(V)&&(a=a.replace(new RegExp(V,"g"),q[V](p)));return a=a.replace(/\0\0/g,"%"),V=jr(a),V.length>s?0:(H.set(V,n>>>0),V.length-1)}var Gr={a:function(n,s,a){throw n>>>=0,new oe(n).Aa(s>>>0,a>>>0),Te=n,j++,Te},e:function(){return 0},H:function(){},x:function(){},z:function(){},J:function(){return 0},F:function(){},A:function(){},E:function(){},g:function(){},y:function(){},v:function(){},G:function(){},w:function(){},k:()=>1,n:function(n,s,a){n=s+2097152>>>0<4194305-!!n?(n>>>0)+4294967296*s:NaN,a>>>=0,n=new Date(1e3*n),E[a>>>2>>>0]=n.getUTCSeconds(),E[a+4>>>2>>>0]=n.getUTCMinutes(),E[a+8>>>2>>>0]=n.getUTCHours(),E[a+12>>>2>>>0]=n.getUTCDate(),E[a+16>>>2>>>0]=n.getUTCMonth(),E[a+20>>>2>>>0]=n.getUTCFullYear()-1900,E[a+24>>>2>>>0]=n.getUTCDay(),E[a+28>>>2>>>0]=(n.getTime()-Date.UTC(n.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},o:function(n,s,a){n=s+2097152>>>0<4194305-!!n?(n>>>0)+4294967296*s:NaN,a>>>=0,n=new Date(1e3*n),E[a>>>2>>>0]=n.getSeconds(),E[a+4>>>2>>>0]=n.getMinutes(),E[a+8>>>2>>>0]=n.getHours(),E[a+12>>>2>>>0]=n.getDate(),E[a+16>>>2>>>0]=n.getMonth(),E[a+20>>>2>>>0]=n.getFullYear()-1900,E[a+24>>>2>>>0]=n.getDay(),E[a+28>>>2>>>0]=(he(n.getFullYear())?pt:mt)[n.getMonth()]+n.getDate()-1|0,E[a+36>>>2>>>0]=-(60*n.getTimezoneOffset()),s=new Date(n.getFullYear(),6,1).getTimezoneOffset();var p=new Date(n.getFullYear(),0,1).getTimezoneOffset();E[a+32>>>2>>>0]=(s!=p&&n.getTimezoneOffset()==Math.min(p,s))|0},p:function(n){n>>>=0;var s=new Date(E[n+20>>>2>>>0]+1900,E[n+16>>>2>>>0],E[n+12>>>2>>>0],E[n+8>>>2>>>0],E[n+4>>>2>>>0],E[n>>>2>>>0],0),a=E[n+32>>>2>>>0],p=s.getTimezoneOffset(),b=new Date(s.getFullYear(),6,1).getTimezoneOffset(),T=new Date(s.getFullYear(),0,1).getTimezoneOffset(),I=Math.min(T,b);return 0>a?E[n+32>>>2>>>0]=+(b!=T&&I==p):0<a!=(I==p)&&(b=Math.max(T,b),s.setTime(s.getTime()+6e4*((0<a?I:b)-p))),E[n+24>>>2>>>0]=s.getDay(),E[n+28>>>2>>>0]=(he(s.getFullYear())?pt:mt)[s.getMonth()]+s.getDate()-1|0,E[n>>>2>>>0]=s.getSeconds(),E[n+4>>>2>>>0]=s.getMinutes(),E[n+8>>>2>>>0]=s.getHours(),E[n+12>>>2>>>0]=s.getDate(),E[n+16>>>2>>>0]=s.getMonth(),E[n+20>>>2>>>0]=s.getYear(),n=s.getTime(),isNaN(n)?(E[Et()>>>2>>>0]=61,n=-1):n/=1e3,Ot((re=n,1<=+Math.abs(re)?0<re?+Math.floor(re/4294967296)>>>0:~~+Math.ceil((re-+(~~re>>>0))/4294967296)>>>0:0)),n>>>0},l:function(){return-52},m:function(){},t:function(n,s,a){function p(K){return(K=K.toTimeString().match(/\(([A-Za-z ]+)\)$/))?K[1]:"GMT"}a>>>=0;var b=new Date().getFullYear(),T=new Date(b,0,1),I=new Date(b,6,1);b=T.getTimezoneOffset();var G=I.getTimezoneOffset();F[n>>>0>>>2>>>0]=60*Math.max(b,G),E[s>>>0>>>2>>>0]=+(b!=G),n=p(T),s=p(I),n=ht(n),s=ht(s),G<b?(F[a>>>2>>>0]=n,F[a+4>>>2>>>0]=s):(F[a>>>2>>>0]=s,F[a+4>>>2>>>0]=n)},d:()=>{de("")},B:function(n,s,a){n>>>=0,s>>>=0,a>>>=0,qe.length=0;for(var p;p=N[s++>>>0];){var b=p!=105;b&=p!=112,a+=b&&a%8?4:0,qe.push(p==112?F[a>>>2>>>0]:p==105?E[a>>>2>>>0]:X[a>>>3>>>0]),a+=b?8:4}return ne[n].apply(null,qe)},h:()=>Date.now(),u:function(){return 4294901760},b:()=>performance.now(),I:function(n,s,a){return s>>>=0,N.copyWithin(n>>>0>>>0,s>>>0,s+(a>>>0)>>>0)},s:function(n){n>>>=0;var s=N.length;if(4294901760<n)return!1;for(var a=1;4>=a;a*=2){var p=s*(1+.2/a);p=Math.min(p,n+100663296);var b=Math;p=Math.max(n,p);e:{b=(b.min.call(b,4294901760,p+(65536-p%65536)%65536)-x.buffer.byteLength+65535)/65536;try{x.grow(b),Be();var T=1;break e}catch{}T=void 0}if(T)return!0}return!1},C:function(n,s){n>>>=0,s>>>=0;var a=0;return yt().forEach((p,b)=>{var T=s+a;for(b=F[n+4*b>>>2>>>0]=T,T=0;T<p.length;++T)H[b++>>>0>>>0]=p.charCodeAt(T);H[b>>>0>>>0]=0,a+=p.length+1}),0},D:function(n,s){n>>>=0,s>>>=0;var a=yt();F[n>>>2>>>0]=a.length;var p=0;return a.forEach(b=>p+=b.length+1),F[s>>>2>>>0]=p,0},f:()=>52,j:function(){return 52},q:function(){return 70},i:function(n,s,a,p){s>>>=0,a>>>=0,p>>>=0;for(var b=0,T=0;T<a;T++){var I=F[s>>>2>>>0],G=F[s+4>>>2>>>0];s+=8;for(var K=0;K<G;K++){var q=N[I+K>>>0],V=$r[n];q===0||q===10?((n===1?_:A)(me(V,0)),V.length=0):V.push(q)}b+=G}return F[p>>>2>>>0]=b,0},r:bt,c:function(n,s,a,p){return bt(n>>>0,s>>>0,a>>>0,p>>>0)}},v=function(){function n(a){return v=a.exports,v=Yr(),x=v.K,Be(),ge.unshift(v.L),Z--,Z==0&&(B!==null&&(clearInterval(B),B=null),Q&&(a=Q,Q=null,a())),v}var s={a:Gr};if(Z++,r.instantiateWasm)try{return r.instantiateWasm(s,n)}catch(a){A(`Module.instantiateWasm callback failed with error: ${a}`),o(a)}return Pe(s,function(a){n(a.instance)}).catch(o),{}}();r._OrtInit=(n,s)=>(r._OrtInit=v.M)(n,s),r._OrtGetLastError=(n,s)=>(r._OrtGetLastError=v.N)(n,s),r._OrtCreateSessionOptions=(n,s,a,p,b,T,I,G,K,q)=>(r._OrtCreateSessionOptions=v.O)(n,s,a,p,b,T,I,G,K,q),r._OrtAppendExecutionProvider=(n,s)=>(r._OrtAppendExecutionProvider=v.P)(n,s),r._OrtAddFreeDimensionOverride=(n,s,a)=>(r._OrtAddFreeDimensionOverride=v.Q)(n,s,a),r._OrtAddSessionConfigEntry=(n,s,a)=>(r._OrtAddSessionConfigEntry=v.R)(n,s,a),r._OrtReleaseSessionOptions=n=>(r._OrtReleaseSessionOptions=v.S)(n),r._OrtCreateSession=(n,s,a)=>(r._OrtCreateSession=v.T)(n,s,a),r._OrtReleaseSession=n=>(r._OrtReleaseSession=v.U)(n),r._OrtGetInputOutputCount=(n,s,a)=>(r._OrtGetInputOutputCount=v.V)(n,s,a),r._OrtGetInputName=(n,s)=>(r._OrtGetInputName=v.W)(n,s),r._OrtGetOutputName=(n,s)=>(r._OrtGetOutputName=v.X)(n,s),r._OrtFree=n=>(r._OrtFree=v.Y)(n),r._OrtCreateTensor=(n,s,a,p,b,T)=>(r._OrtCreateTensor=v.Z)(n,s,a,p,b,T),r._OrtGetTensorData=(n,s,a,p,b)=>(r._OrtGetTensorData=v._)(n,s,a,p,b),r._OrtReleaseTensor=n=>(r._OrtReleaseTensor=v.$)(n),r._OrtCreateRunOptions=(n,s,a,p)=>(r._OrtCreateRunOptions=v.aa)(n,s,a,p),r._OrtAddRunConfigEntry=(n,s,a)=>(r._OrtAddRunConfigEntry=v.ba)(n,s,a),r._OrtReleaseRunOptions=n=>(r._OrtReleaseRunOptions=v.ca)(n),r._OrtCreateBinding=n=>(r._OrtCreateBinding=v.da)(n),r._OrtBindInput=(n,s,a)=>(r._OrtBindInput=v.ea)(n,s,a),r._OrtBindOutput=(n,s,a,p)=>(r._OrtBindOutput=v.fa)(n,s,a,p),r._OrtClearBoundOutputs=n=>(r._OrtClearBoundOutputs=v.ga)(n),r._OrtReleaseBinding=n=>(r._OrtReleaseBinding=v.ha)(n),r._OrtRunWithBinding=(n,s,a,p,b)=>(r._OrtRunWithBinding=v.ia)(n,s,a,p,b),r._OrtRun=(n,s,a,p,b,T,I,G)=>(r._OrtRun=v.ja)(n,s,a,p,b,T,I,G),r._OrtEndProfiling=n=>(r._OrtEndProfiling=v.ka)(n);var Et=()=>(Et=v.la)(),Tt=r._malloc=n=>(Tt=r._malloc=v.ma)(n);r._free=n=>(r._free=v.na)(n);var Ot=n=>(Ot=v.pa)(n),vt=()=>(vt=v.qa)(),St=n=>(St=v.ra)(n),At=n=>(At=v.sa)(n);function Yr(){var n=v;n=Object.assign({},n);var s=p=>()=>p()>>>0,a=p=>b=>p(b)>>>0;return n.la=s(n.la),n.ma=a(n.ma),n.qa=s(n.qa),n.sa=a(n.sa),n}r.stackAlloc=At,r.stackSave=vt,r.stackRestore=St,r.UTF8ToString=se,r.stringToUTF8=(n,s,a)=>Ye(n,N,s,a),r.lengthBytesUTF8=Oe;var _e;Q=function n(){_e||xt(),_e||(Q=n)};function xt(){if(!(0<Z)){if(r.preRun)for(typeof r.preRun=="function"&&(r.preRun=[r.preRun]);r.preRun.length;){var n=r.preRun.shift();we.unshift(n)}for(;0<we.length;)we.shift()(r);if(!(0<Z||_e||(_e=!0,r.calledRun=!0,k))){for(;0<ge.length;)ge.shift()(r);for(i(r);0<be.length;)be.shift()(r)}}}return xt(),e.ready}})();typeof fr=="object"&&typeof rt=="object"?rt.exports=ur:typeof define=="function"&&define.amd&&define([],()=>ur)});var st,on,nt,ot,We,lr,sn,an,un,dr,R,ye=P(()=>{"use strict";st=cr();on=st,ot=!1,We=!1,lr=!1,sn=t=>{if(t===1)return!1;if(typeof SharedArrayBuffer>"u")return typeof self<"u"&&!self.crossOriginIsolated&&console.warn("env.wasm.numThreads is set to "+t+", but this will not work unless you enable crossOriginIsolated mode. See https://web.dev/cross-origin-isolation-guide/ for more info."),!1;typeof process<"u"&&process.versions&&process.versions.node&&console.warn("env.wasm.numThreads is set to "+t+", however, currently onnxruntime-web does not support multi-threads in Node.js. Please consider using onnxruntime-node for performance critical scenarios.");try{return typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]))}catch{return!1}},an=()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch{return!1}},un=(t,e)=>t?e?"ort-wasm-simd-threaded.wasm":"ort-wasm-simd.wasm":e?"ort-wasm-threaded.wasm":"ort-wasm.wasm",dr=async t=>{if(ot)return Promise.resolve();if(We)throw new Error("multiple calls to 'initializeWebAssembly()' detected.");if(lr)throw new Error("previous call to 'initializeWebAssembly()' failed.");We=!0;let e=t.initTimeout,r=t.numThreads,i=t.simd,o=sn(r),f=i&&an(),u=t.wasmPaths,c=typeof u=="string"?u:void 0,m=un(f,o),l=typeof u=="object"?u[m]:void 0,y=!1,w=[];if(e>0&&w.push(new Promise(h=>{setTimeout(()=>{y=!0,h()},e)})),w.push(new Promise((h,g)=>{(o?on:st)({locateFile:(_,A)=>_.endsWith(".wasm")?l||(c??A)+m:A+_}).then(_=>{We=!1,ot=!0,nt=_,h()},_=>{We=!1,lr=!0,g(_)})})),await Promise.race(w),y)throw new Error(`WebAssembly backend initializing failed due to timeout: ${e}ms`)},R=()=>{if(ot&&nt)return nt;throw new Error("WebAssembly is not initialized yet.")}});var M,Ae,L,He=P(()=>{"use strict";ye();M=(t,e)=>{let r=R(),i=r.lengthBytesUTF8(t)+1,o=r._malloc(i);return r.stringToUTF8(t,o,i),e.push(o),o},Ae=(t,e,r,i)=>{if(typeof t=="object"&&t!==null){if(r.has(t))throw new Error("Circular reference in options");r.add(t)}Object.entries(t).forEach(([o,f])=>{let u=e?e+o:o;if(typeof f=="object")Ae(f,u+".",r,i);else if(typeof f=="string"||typeof f=="number")i(u,f.toString());else if(typeof f=="boolean")i(u,f?"1":"0");else throw new Error(`Can't handle extra config type: ${typeof f}`)})},L=t=>{let e=R(),r=e.stackSave();try{let i=e.stackAlloc(8);e._OrtGetLastError(i,i+4);let o=e.HEAP32[i/4],f=e.HEAPU32[i/4+1],u=f?e.UTF8ToString(f):"";throw new Error(`${t} ERROR_CODE: ${o}, ERROR_MESSAGE: ${u}`)}finally{e.stackRestore(r)}}});var pr,mr=P(()=>{"use strict";ye();He();pr=t=>{let e=R(),r=0,i=[],o=t||{};try{if(t?.logSeverityLevel===void 0)o.logSeverityLevel=2;else if(typeof t.logSeverityLevel!="number"||!Number.isInteger(t.logSeverityLevel)||t.logSeverityLevel<0||t.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${t.logSeverityLevel}`);if(t?.logVerbosityLevel===void 0)o.logVerbosityLevel=0;else if(typeof t.logVerbosityLevel!="number"||!Number.isInteger(t.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${t.logVerbosityLevel}`);t?.terminate===void 0&&(o.terminate=!1);let f=0;return t?.tag!==void 0&&(f=M(t.tag,i)),r=e._OrtCreateRunOptions(o.logSeverityLevel,o.logVerbosityLevel,!!o.terminate,f),r===0&&L("Can't create run options."),t?.extra!==void 0&&Ae(t.extra,"",new WeakSet,(u,c)=>{let m=M(u,i),l=M(c,i);e._OrtAddRunConfigEntry(r,m,l)!==0&&L(`Can't set a run config entry: ${u} - ${c}.`)}),[r,i]}catch(f){throw r!==0&&e._OrtReleaseRunOptions(r),i.forEach(u=>e._free(u)),f}}});var fn,cn,ln,dn,hr,yr=P(()=>{"use strict";ye();He();fn=t=>{switch(t){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${t}`)}},cn=t=>{switch(t){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${t}`)}},ln=t=>{t.extra||(t.extra={}),t.extra.session||(t.extra.session={});let e=t.extra.session;e.use_ort_model_bytes_directly||(e.use_ort_model_bytes_directly="1"),t.executionProviders&&t.executionProviders.some(r=>(typeof r=="string"?r:r.name)==="webgpu")&&(t.enableMemPattern=!1)},dn=(t,e,r)=>{for(let i of e){let o=typeof i=="string"?i:i.name;switch(o){case"webnn":if(o="WEBNN",typeof i!="string"){let u=i;if(u?.deviceType){let c=M("deviceType",r),m=M(u.deviceType,r);R()._OrtAddSessionConfigEntry(t,c,m)!==0&&L(`Can't set a session config entry: 'deviceType' - ${u.deviceType}.`)}if(u?.numThreads){let c=u.numThreads;(typeof c!="number"||!Number.isInteger(c)||c<0)&&(c=0);let m=M("numThreads",r),l=M(c.toString(),r);R()._OrtAddSessionConfigEntry(t,m,l)!==0&&L(`Can't set a session config entry: 'numThreads' - ${u.numThreads}.`)}if(u?.powerPreference){let c=M("powerPreference",r),m=M(u.powerPreference,r);R()._OrtAddSessionConfigEntry(t,c,m)!==0&&L(`Can't set a session config entry: 'powerPreference' - ${u.powerPreference}.`)}}break;case"webgpu":if(o="JS",typeof i!="string"){let u=i;if(u?.preferredLayout){if(u.preferredLayout!=="NCHW"&&u.preferredLayout!=="NHWC")throw new Error(`preferredLayout must be either 'NCHW' or 'NHWC': ${u.preferredLayout}`);let c=M("preferredLayout",r),m=M(u.preferredLayout,r);R()._OrtAddSessionConfigEntry(t,c,m)!==0&&L(`Can't set a session config entry: 'preferredLayout' - ${u.preferredLayout}.`)}}break;case"wasm":case"cpu":continue;default:throw new Error(`not supported execution provider: ${o}`)}let f=M(o,r);R()._OrtAppendExecutionProvider(t,f)!==0&&L(`Can't append execution provider: ${o}.`)}},hr=t=>{let e=R(),r=0,i=[],o=t||{};ln(o);try{let f=fn(o.graphOptimizationLevel??"all"),u=cn(o.executionMode??"sequential"),c=typeof o.logId=="string"?M(o.logId,i):0,m=o.logSeverityLevel??2;if(!Number.isInteger(m)||m<0||m>4)throw new Error(`log serverity level is not valid: ${m}`);let l=o.logVerbosityLevel??0;if(!Number.isInteger(l)||l<0||l>4)throw new Error(`log verbosity level is not valid: ${l}`);let y=typeof o.optimizedModelFilePath=="string"?M(o.optimizedModelFilePath,i):0;if(r=e._OrtCreateSessionOptions(f,!!o.enableCpuMemArena,!!o.enableMemPattern,u,!!o.enableProfiling,0,c,m,l,y),r===0&&L("Can't create session options."),o.executionProviders&&dn(r,o.executionProviders,i),o.freeDimensionOverrides)for(let[w,h]of Object.entries(o.freeDimensionOverrides)){if(typeof w!="string")throw new Error(`free dimension override name must be a string: ${w}`);if(typeof h!="number"||!Number.isInteger(h)||h<0)throw new Error(`free dimension override value must be a non-negative integer: ${h}`);let g=M(w,i);e._OrtAddFreeDimensionOverride(r,g,h)!==0&&L(`Can't set a free dimension override: ${w} - ${h}.`)}return o.extra!==void 0&&Ae(o.extra,"",new WeakSet,(w,h)=>{let g=M(w,i),O=M(h,i);e._OrtAddSessionConfigEntry(r,g,O)!==0&&L(`Can't set a session config entry: ${w} - ${h}.`)}),[r,i]}catch(f){throw r!==0&&e._OrtReleaseSessionOptions(r),i.forEach(u=>e._free(u)),f}}});var it,wr,at,gr,br,ze,Er,ut=P(()=>{"use strict";it=t=>{switch(t){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float16":return 10;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error(`unsupported data type: ${t}`)}},wr=t=>{switch(t){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 10:return"float16";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error(`unsupported data type: ${t}`)}},at=t=>[void 0,4,1,1,2,2,4,8,void 0,1,2,8,4,8,void 0,void 0,void 0][t],gr=t=>{switch(t){case"float16":return Uint16Array;case"float32":return Float32Array;case"uint8":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"bool":return Uint8Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${t}`)}},br=t=>{switch(t){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw new Error(`unsupported logging level: ${t}`)}},ze=t=>t==="float32"||t==="int32"||t==="int64"||t==="bool"||t==="float16"||t==="uint32",Er=t=>{switch(t){case"none":return 0;case"cpu":return 1;case"cpu-pinned":return 2;case"texture":return 3;case"gpu-buffer":return 4;default:throw new Error(`unsupported data location: ${t}`)}}});var xe,ft=P(()=>{"use strict";xe=async t=>{if(typeof t=="string")if(typeof process<"u"&&process.versions&&process.versions.node)try{return new Uint8Array(await(void 0)(t))}catch(e){if(e.code==="ERR_FS_FILE_TOO_LARGE"){let r=(void 0)(t),i=[];for await(let o of r)i.push(o);return new Uint8Array(Buffer.concat(i))}throw e}else{let e=await fetch(t);if(!e.ok)throw new Error(`failed to load external data file: ${t}`);let r=e.headers.get("Content-Length"),i=r?parseInt(r,10):0;if(i<1073741824)return new Uint8Array(await e.arrayBuffer());{if(!e.body)throw new Error(`failed to load external data file: ${t}, no response body.`);let o=e.body.getReader(),f;try{f=new ArrayBuffer(i)}catch(c){if(c instanceof RangeError){let m=Math.ceil(i/65536);f=new WebAssembly.Memory({initial:m,maximum:m}).buffer}else throw c}let u=0;for(;;){let{done:c,value:m}=await o.read();if(c)break;let l=m.byteLength;new Uint8Array(f,u,l).set(m),u+=l}return new Uint8Array(f,0,i)}}else return t instanceof Blob?new Uint8Array(await t.arrayBuffer()):t instanceof Uint8Array?t:new Uint8Array(t)}});var pn,Or,vr,Ie,mn,ct,Sr,Ar,Tr,xr,Ir,Br=P(()=>{"use strict";mr();yr();ut();ye();He();ft();pn=(t,e)=>{R()._OrtInit(t,e)!==0&&L("Can't initialize onnxruntime.")},Or=async t=>{pn(t.wasm.numThreads,br(t.logLevel))},vr=async(t,e)=>{},Ie=new Map,mn=t=>{let e=R(),r=e.stackSave();try{let i=e.stackAlloc(8);return e._OrtGetInputOutputCount(t,i,i+4)!==0&&L("Can't get session input/output count."),[e.HEAP32[i/4],e.HEAP32[i/4+1]]}finally{e.stackRestore(r)}},ct=t=>{let e=R(),r=e._malloc(t.byteLength);if(r===0)throw new Error(`Can't create a session. failed to allocate a buffer of size ${t.byteLength}.`);return e.HEAPU8.set(t,r),[r,t.byteLength]},Sr=async(t,e)=>{let r,i,o=R();Array.isArray(t)?[r,i]=t:t.buffer===o.HEAPU8.buffer?[r,i]=[t.byteOffset,t.byteLength]:[r,i]=ct(t);let f=0,u=0,c=0,m=[],l=[],y=[];try{if([u,m]=hr(e),e?.externalData&&o.mountExternalData){let A=[];for(let x of e.externalData){let k=typeof x=="string"?x:x.path;A.push(xe(typeof x=="string"?x:x.data).then(H=>{o.mountExternalData(k,H)}))}await Promise.all(A)}f=o._OrtCreateSession(r,i,u),f===0&&L("Can't create a session.");let[w,h]=mn(f),g=[],O=[],S=[];for(let A=0;A<w;A++){let x=o._OrtGetInputName(f,A);x===0&&L("Can't get an input name."),l.push(x),g.push(o.UTF8ToString(x))}for(let A=0;A<h;A++){let x=o._OrtGetOutputName(f,A);x===0&&L("Can't get an output name."),y.push(x);let k=o.UTF8ToString(x);O.push(k)}let _=null;return Ie.set(f,[f,l,y,_]),[f,g,O]}catch(w){throw l.forEach(h=>o._OrtFree(h)),y.forEach(h=>o._OrtFree(h)),c!==0&&o._OrtReleaseBinding(c),f!==0&&o._OrtReleaseSession(f),w}finally{o._free(r),u!==0&&o._OrtReleaseSessionOptions(u),m.forEach(w=>o._free(w)),o.unmountExternalData?.()}},Ar=t=>{let e=R(),r=Ie.get(t);if(!r)throw new Error(`cannot release session. invalid session id: ${t}`);let[i,o,f,u]=r;u&&e._OrtReleaseBinding(u.handle),e.jsepUnregisterBuffers?.(t),o.forEach(c=>e._OrtFree(c)),f.forEach(c=>e._OrtFree(c)),e._OrtReleaseSession(i),Ie.delete(t)},Tr=(t,e,r,i,o)=>{if(!t){e.push(0);return}let f=R(),u=t[0],c=t[1],m=t[3],l,y;if(u==="string"&&m==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");if(m==="gpu-buffer"){let g=t[2].gpuBuffer,O=at(it(u));y=c.reduce((S,_)=>S*_,1)*O,l=f.jsepRegisterBuffer(i,o,g,y)}else{let g=t[2];if(Array.isArray(g)){y=4*g.length,l=f._malloc(y),r.push(l);let O=l/4;for(let S=0;S<g.length;S++){if(typeof g[S]!="string")throw new TypeError(`tensor data at index ${S} is not a string`);f.HEAPU32[O++]=M(g[S],r)}}else y=g.byteLength,l=f._malloc(y),r.push(l),f.HEAPU8.set(new Uint8Array(g.buffer,g.byteOffset,y),l)}let w=f.stackSave(),h=f.stackAlloc(4*c.length);try{let g=h/4;c.forEach(S=>f.HEAP32[g++]=S);let O=f._OrtCreateTensor(it(u),l,y,h,c.length,Er(m));O===0&&L(`Can't create tensor for input/output. session=${i}, index=${o}.`),e.push(O)}finally{f.stackRestore(w)}},xr=async(t,e,r,i,o,f)=>{let u=R(),c=Ie.get(t);if(!c)throw new Error(`cannot run inference. invalid session id: ${t}`);let[m,l,y,w]=c,h=e.length,g=i.length,O=0,S=[],_=[],A=[],x=[],k=u.stackSave(),H=u.stackAlloc(h*4),N=u.stackAlloc(h*4),E=u.stackAlloc(g*4),F=u.stackAlloc(g*4);try{[O,S]=pr(f);for(let B=0;B<h;B++)Tr(r[B],_,x,t,e[B]);for(let B=0;B<g;B++)Tr(o[B],A,x,t,h+i[B]);let X=H/4,Be=N/4,we=E/4,ge=F/4;for(let B=0;B<h;B++)u.HEAPU32[X++]=_[B],u.HEAPU32[Be++]=l[e[B]];for(let B=0;B<g;B++)u.HEAPU32[we++]=A[B],u.HEAPU32[ge++]=y[i[B]];let be;be=await u._OrtRun(m,N,H,h,F,g,E,O),be!==0&&L("failed to call OrtRun().");let Z=[];for(let B=0;B<g;B++){let Q=u.HEAPU32[E/4+B];if(Q===A[B]){Z.push(o[B]);continue}let de=u.stackSave(),ee=u.stackAlloc(4*4),te=!1,W,J=0;try{u._OrtGetTensorData(Q,ee,ee+4,ee+8,ee+12)!==0&&L(`Can't access output tensor data on index ${B}.`);let pe=ee/4,Ee=u.HEAPU32[pe++];J=u.HEAPU32[pe++];let Pe=u.HEAPU32[pe++],re=u.HEAPU32[pe++],ne=[];for(let j=0;j<re;j++)ne.push(u.HEAPU32[Pe/4+j]);u._OrtFree(Pe);let oe=ne.reduce((j,z)=>j*z,1);W=wr(Ee);let Te=w?.outputPreferredLocations[i[B]];if(W==="string"){if(Te==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");let j=[],z=J/4;for(let me=0;me<oe;me++){let se=u.HEAPU32[z++],Oe=me===oe-1?void 0:u.HEAPU32[z]-se;j.push(u.UTF8ToString(se,Oe))}Z.push([W,ne,j,"cpu"])}else if(Te==="gpu-buffer"&&oe>0){let j=u.jsepGetBuffer(J),z=at(Ee);if(z===void 0||!ze(W))throw new Error(`Unsupported data type: ${W}`);te=!0,Z.push([W,ne,{gpuBuffer:j,download:u.jsepCreateDownloader(j,oe*z,W),dispose:()=>{u._OrtReleaseTensor(Q)}},"gpu-buffer"])}else{let j=gr(W),z=new j(oe);new Uint8Array(z.buffer,z.byteOffset,z.byteLength).set(u.HEAPU8.subarray(J,J+z.byteLength)),Z.push([W,ne,z,"cpu"])}}finally{u.stackRestore(de),W==="string"&&J&&u._free(J),te||u._OrtReleaseTensor(Q)}}return w&&u._OrtClearBoundOutputs(w.handle),Z}finally{u.stackRestore(k),_.forEach(X=>u._OrtReleaseTensor(X)),A.forEach(X=>u._OrtReleaseTensor(X)),x.forEach(X=>u._free(X)),O!==0&&u._OrtReleaseRunOptions(O),S.forEach(X=>u._free(X))}},Ir=t=>{let e=R(),r=Ie.get(t);if(!r)throw new Error("invalid session id");let i=r[0],o=e._OrtEndProfiling(i);o===0&&L("Can't get an profile file name."),e._OrtFree(o)}});var lt,Pr,_r,Co,Cr,Dr,Ur,Lr,Rr,Mr,Fr,dt=P(()=>{"use strict";le();Br();ye();lt=!1,Pr=!1,_r=!1,Co=typeof document<"u"?document?.currentScript?.src:void 0,Cr=async()=>{if(!Pr){if(lt)throw new Error("multiple calls to 'initWasm()' detected.");if(_r)throw new Error("previous call to 'initWasm()' failed.");lt=!0;try{await dr(U.wasm),await Or(U),Pr=!0}catch(t){throw _r=!0,t}finally{lt=!1}}},Dr=async t=>{await vr(U,t)},Ur=async t=>ct(t),Lr=async(t,e)=>Sr(t,e),Rr=async t=>{Ar(t)},Mr=async(t,e,r,i,o,f)=>xr(t,e,r,i,o,f),Fr=async t=>{Ir(t)}});var kr,yn,$e,Nr=P(()=>{"use strict";le();dt();ut();ft();kr=(t,e)=>{switch(t.location){case"cpu":return[t.type,t.dims,t.data,"cpu"];case"gpu-buffer":return[t.type,t.dims,{gpuBuffer:t.gpuBuffer},"gpu-buffer"];default:throw new Error(`invalid data location: ${t.location} for ${e()}`)}},yn=t=>{switch(t[3]){case"cpu":return new $(t[0],t[2],t[1]);case"gpu-buffer":{let e=t[0];if(!ze(e))throw new Error(`not supported data type: ${e} for deserializing GPU tensor`);let{gpuBuffer:r,download:i,dispose:o}=t[2];return $.fromGpuBuffer(r,{dataType:e,dims:t[1],download:i,dispose:o})}default:throw new Error(`invalid data location: ${t[3]}`)}},$e=class{async fetchModelAndCopyToWasmMemory(e){return Ur(await xe(e))}async loadModel(e,r){fe();let i;typeof e=="string"?typeof process<"u"&&process.versions&&process.versions.node?i=await xe(e):i=await this.fetchModelAndCopyToWasmMemory(e):i=e,[this.sessionId,this.inputNames,this.outputNames]=await Lr(i,r),ce()}async dispose(){return Rr(this.sessionId)}async run(e,r,i){fe();let o=[],f=[];Object.entries(e).forEach(h=>{let g=h[0],O=h[1],S=this.inputNames.indexOf(g);if(S===-1)throw new Error(`invalid input '${g}'`);o.push(O),f.push(S)});let u=[],c=[];Object.entries(r).forEach(h=>{let g=h[0],O=h[1],S=this.outputNames.indexOf(g);if(S===-1)throw new Error(`invalid output '${g}'`);u.push(O),c.push(S)});let m=o.map((h,g)=>kr(h,()=>`input "${this.inputNames[f[g]]}"`)),l=u.map((h,g)=>h?kr(h,()=>`output "${this.outputNames[c[g]]}"`):null),y=await Mr(this.sessionId,f,m,c,l,i),w={};for(let h=0;h<y.length;h++)w[this.outputNames[c[h]]]=u[h]??yn(y[h]);return ce(),w}startProfiling(){}endProfiling(){Fr(this.sessionId)}}});var wn,je,Wr=P(()=>{"use strict";le();dt();Nr();wn=()=>{if((typeof U.wasm.initTimeout!="number"||U.wasm.initTimeout<0)&&(U.wasm.initTimeout=0),typeof U.wasm.simd!="boolean"&&(U.wasm.simd=!0),typeof U.wasm.proxy!="boolean"&&(U.wasm.proxy=!1),typeof U.wasm.trace!="boolean"&&(U.wasm.trace=!1),typeof U.wasm.numThreads!="number"||!Number.isInteger(U.wasm.numThreads)||U.wasm.numThreads<=0){(typeof self<"u"&&!self.crossOriginIsolated||typeof process<"u"&&process.versions&&process.versions.node)&&(U.wasm.numThreads=1);let t=typeof navigator>"u"?(void 0)().length:navigator.hardwareConcurrency;U.wasm.numThreads=Math.min(4,Math.ceil((t||1)/2))}},je=class{async init(e){wn(),await Cr(),await Dr(e)}async createInferenceSessionHandler(e,r){let i=new $e;return await i.loadModel(e,r),Promise.resolve(i)}}});var Hr={};Ce(Hr,{wasmBackend:()=>gn});var gn,zr=P(()=>{"use strict";Wr();gn=new je});le();le();le();var rr="1.17.1";var Jo=tt;{let t=(zr(),Ke(Hr)).wasmBackend;ve("cpu",t,10),ve("wasm",t,10)}Object.defineProperty(U.versions,"web",{value:rr,enumerable:!0});export{Zr as InferenceSession,Xt as TRACE,fe as TRACE_FUNC_BEGIN,ce as TRACE_FUNC_END,$ as Tensor,en as TrainingSession,Jo as default,U as env,ve as registerBackend};
//# sourceMappingURL=ort.wasm-core.min.js.map
